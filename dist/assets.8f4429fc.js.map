{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.js","assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","forEach","plugin","run","play","pause","togglePlay","paused","mute","muted","unmute","AutoPlay","player","AutoPause","threshold","handleIntersection","bind","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","entries","entry","isVisible","intersectionRatio","visibilityState","video","querySelector","playButton","onclick","muteButton","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":";;AGAA;;AACA;;AACA;AHFA,ACAA,SDASA,ACAAiB,QAAT,GDAA,ACAoB,CDAChB,ACAC,MDAtB,EAA6B;AACzB,OAAKC,KAAL,GAAaD,MAAM,CAACE,EAApB;AACA,ACDJc,ODCSb,CCDD,CAACE,KDCL,GAAeL,CCDnB,CAAmBQ,GAAnB,CDCyB,CAACL,CCDD,MDCN,IAAkB,ACDHc,EDC9B,ICDqB,EAAiB;AEG1C,AFFIA,EAAAA,EEEEgB,IFFI,CEEC,AFFApB,GEEGa,CFFV,OEEkB,CAACQ,aAAT,CAAuB,OAAvB,CAAd;AHAI,AGCJ,AFFIjB,EAAAA,EEEEA,GHDGb,CCDC,CAACK,CEEC,GAAG,AFFX,IEEeV,EHDf,kBGCW,CAAgB;AHA9B,AGCCG,AFFD,CAHD,CEKEA,EAAE,EAAE+B,KADyB;AAE7B9B,EAAAA,EDPIe,KCOG,EAAE,CAAC,IAAIF,iBAAJ,EAAD,EAAiB,IAAIE,kBAAJ,EAAjB;AHAXnB,AGF+B,ADJ3B,CCIW,CAAf,SHEW,CAACM,GCDGW,MDCf,CAAsBZ,CENJ,WFMlB,GAAqC,YAAW;AAAA,AGGhD,ADTkB,ICSZ+B,UAAU,GAAGT,QAAQ,CAACQ,aAAT,CAAuB,aAAvB,CAAnB;;AHFI,AGGJC,ADTQ,OFMChC,EENIgB,CCSH,CAACiB,GHHP,CAAa9B,GGGjB,ADTQ,GCSa,ADTI,CFMrB,CAAqB,EENjB,QFMiBC,MAAM,EAAI;AAC3BA,AGEa,ADRb,IFMAA,KGEmBU,ADRdG,CFMC,CAACZ,GAAP,CAAW,AGEc,CAACG,IHF1B,MGEmB,CDRnB,CCQa,EDRa,KAAKS,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;AFOH,AGCgB,ADPb,CCOR,EHHI,MEJSC,sBAAL,GAA8B,KAAKA,sBAAL,CAA4BD,IAA5B,CAAiC,IAAjC,CAA9B;AFOP,AENI,CFEL;AGMA,IAAMgB,UAAU,GAAGX,QAAQ,CAACQ,aAAT,CAAuB,aAAvB,CAAnB;AHAAnC,WAAW,CAACM,SAAZ,CAAsBI,IAAtB,GAA6B,YAAW;AACtC,AGAF4B,OHAOpC,GGAG,CAACmC,CHAT,CAAW3B,IAAX,CGAF,GAAqB,YAAM;AHC1B,AGAC,CHFF,KGEMQ,MAAM,CAAChB,KAAP,CAAaa,KAAjB,ADRMG,ECQkB,MDRV;ACSZA,ADRI,ICQJA,MAAM,CAACF,ADREE,MCQT,ADRI,GAAcA,MAAd;AFSRlB,AGAG,ADPK,GCKN,MAEO,CDPKwB,CFOH,CAAClB,MEPU,GFOtB,AEPyB,CFOHK,GEPOc,EFO7B,GAA8B,YAAW,GEPhB,CAAyB,KAAKJ,kBAA9B,EAAkD;AFQzE,AGAEH,ADPQE,ICORF,GHAGhB,CEPKkB,ECOF,CAACN,CHAT,CAAWH,EGAT,EDPiB,CFOnB,CEPqB,KAAKS;AFQ3B,AGAE,ADTwE,CFO3E,MEPyB,CAAjB;ACUP,ADNOI,CCAR,KDAQA,QAAQ,CAACE,OAAT,CAAiB,KAAKR,MAAL,CAAYhB,KAA7B;AFORF,AELQ2B,MAAAA,KFKG,CAACrB,EELI,CAACsB,MFKjB,CAAsBhB,SELd,CFKR,AELkC,GFKC,YAAW,GELtC,EAA8C,KAAKW,sBAAnD;AFMN,AGAF,ADLK,ICKD,EHAE,KAAKrB,KAAL,CAAWW,MAAf,AGAqB0B,EHAE,OGAzB,EAAkC;AHC9B,AGAFA,EAAAA,OHAO7B,EGAE,CAAC8B,CHAR,YGAF,CAAwBC,QAAxB,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAiD,UAAAC,KAAK,EAAI;AHCzD,AGACC,GHFF,CGEEA,KHAK,EGAE,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AHCA,AGAD,GAFD,MHEOnC,KAAL,yBENmBkB,SAAS;AFO7B,AGAF,ADNO,UAAMC,KAAK,GAAGD,OAAO,CAAC,CAAD,CAArB;AFOP,AELO,CFDR,SECcE,SAAS,GAAGD,KAAK,CAACE,iBAAN,IAA2B,KAAKZ,SAAlD;;AFORpB,AELQ,UAAI+B,CFKD,CAACzB,OELJ,EFKR,AELuB,CFKDQ,IAAtB,GAA6B,YAAW;AACpC,AELQ,OFKHZ,KAAL,CAAWa,AELEG,KFKb,CELQ,CAAYR,CFKD,GELX,CFKR;AACH,AELQ,CFGT,MELQ,MAEO;AACH,aAAKQ,MAAL,CAAYP,KAAZ;AFMZX,AELS,WFKE,CAACM,SAAZ,CAAsBU,MAAtB,GAA+B,YAAW;AACtC,AELC,OFKId,KAAL,CAAWa,KAAX,GAAmB,KAAnB;AACH,CAFD;;eAIef,8BENc;AACrB,UAAM+B,SAAS,GAAGJ,QAAQ,CAACM,eAAT,KAA6B,SAA/C;;AAEA,UAAIF,SAAJ,EAAe;AACX,aAAKb,MAAL,CAAYR,IAAZ;AACH,OAFD,MAEO;AACH,aAAKQ,MAAL,CAAYP,KAAZ;AACH;AACJ;;;;;;eAGUQ","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["function MediaPlayer(config) {\n    this.media = config.el;\n    this.plugins = config.plugins || [];\n\n    this._initPlugins();\n}\n\nMediaPlayer.prototype._initPlugins = function() {\n    this.plugins.forEach(plugin => {\n        plugin.run(this);\n    });\n};\n\nMediaPlayer.prototype.play = function() {\n  this.media.play();\n};\n\nMediaPlayer.prototype.pause = function() {\n  this.media.pause();\n};\n\nMediaPlayer.prototype.togglePlay = function() {\n  if (this.media.paused) {\n    this.play();\n  } else {\n    this.pause();\n  }\n};\n\nMediaPlayer.prototype.mute = function() {\n    this.media.muted = true;\n};\n\nMediaPlayer.prototype.unmute = function() {\n    this.media.muted = false;\n};\n\nexport default MediaPlayer;","function AutoPlay() {}\nAutoPlay.prototype.run = function(player) {\n    player.mute();\n    player.play();\n};\n\nexport default AutoPlay;","class AutoPause {\n    constructor() {\n        this.threshold = 0.25;\n        this.handleIntersection = this.handleIntersection.bind(this);\n        this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n    }\n\n    run(player) {\n        this.player = player;\n\n        const observer = new IntersectionObserver(this.handleIntersection, {\n            threshold: this.threshold,\n        });\n\n        observer.observe(this.player.media);\n\n        document.addEventListener(\"visibilitychange\", this.handleVisibilityChange)\n    }\n\n    handleIntersection(entries) {\n        const entry = entries[0]; \n\n        const isVisible = entry.intersectionRatio >= this.threshold;\n\n        if (isVisible) {\n            this.player.play();\n        } else {\n            this.player.pause();\n        }\n    }\n\n    handleVisibilityChange() {\n        const isVisible = document.visibilityState === \"visible\"\n\n        if (isVisible) {\n            this.player.play();\n        } else {\n            this.player.pause();\n        }\n    }\n}\n\nexport default AutoPause;","import MediaPlayer from './MediaPlayer.js';\nimport AutoPlay from './plugins/AutoPlay.js';\nimport AutoPause from './plugins/AutoPause.js';\n\nconst video = document.querySelector('video');\nconst player = new MediaPlayer({\n  el: video,\n  plugins: [new AutoPlay(), new AutoPause()],\n});\n\nconst playButton = document.querySelector('#playButton');\nplayButton.onclick = () => player.togglePlay();\n\nconst muteButton = document.querySelector('#muteButton');\nmuteButton.onclick = () => {\n  if (player.media.muted) {\n    player.unmute();\n  } else {\n    player.mute();\n  }\n};\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js').catch(error => {\n    console.log(error.message);\n  });\n}"]}